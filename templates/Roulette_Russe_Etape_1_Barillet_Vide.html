<!DOCTYPE html>
<html>
<head>
<script>
let chambreRougeId = ""; // Variable pour suivre la chambre rouge sélectionnée

function lancer(){
    alert("Le barillet tourne");
    // Réinitialiser la couleur des chambres à gris
    resetCouleur();
    // Mélanger les positions des chambres
    melangerChambres();
    // Générer un numéro aléatoire entre 1 et 6
    let val = Math.floor(Math.random() * 6) + 1;
    alert("Le numéro aléatoire est : " + val);
    
    // Vérifier si la chambre rouge correspond au numéro généré
    if(document.getElementById("Br"+val).style.fill == "red") {
        alert("Perdu");
    } else {
        alert("Gagné");
    }
}

function afficherChambre(chambre){
    alert("Vous avez cliqué sur la chambre numéro " + chambre);
    // Rendre la chambre sélectionnée rouge
    chambreRougeId = "Br" + chambre;
    chambreRouge(chambreRougeId);
}

function chambreRouge(chambreId){
    // On change la couleur du barillet cliqué en rouge
    document.getElementById(chambreId).setAttribute("fill", "red");
}

function resetCouleur(){
    // Réinitialise la couleur de toutes les chambres à gris
    let chambres = ["Br1", "Br2", "Br3", "Br4", "Br5", "Br6"];
    chambres.forEach(function(chambreId) {
        document.getElementById(chambreId).setAttribute("fill", "gray");
    });
}

function melangerChambres(){
    // Générer de nouvelles positions aléatoires pour chaque chambre
    let positions = [
        {cx: 100, cy: 40},
        {cx: 150, cy: 70},
        {cx: 50, cy: 70},
        {cx: 50, cy: 130},
        {cx: 150, cy: 130},
        {cx: 100, cy: 160}
    ];

    // Mélanger les positions
    for (let i = positions.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [positions[i], positions[j]] = [positions[j], positions[i]];
    }

    // Appliquer les nouvelles positions aux chambres
    for (let i = 0; i < positions.length; i++) {
        let chambreId = "Br" + (i + 1);
        document.getElementById(chambreId).setAttribute("cx", positions[i].cx);
        document.getElementById(chambreId).setAttribute("cy", positions[i].cy);
    }
}
</script>
</head>
<body>
    <h1>Roulette Russe</h1>

    <svg width="200" height="200" style="background-color:antiquewhite">
        <circle cx="100" cy="40" r="25" stroke="black" stroke-width="3" fill="gray" id="Br1" onclick="afficherChambre(1)" />
        <circle cx="150" cy="70" r="25" stroke="black" stroke-width="3" fill="gray" id="Br2" onclick="afficherChambre(2)" />
        <circle cx="50" cy="70" r="25" stroke="black" stroke-width="3" fill="gray" id="Br3" onclick="afficherChambre(3)" />
        <circle cx="50" cy="130" r="25" stroke="black" stroke-width="3" fill="gray" id="Br4" onclick="afficherChambre(4)" />
        <circle cx="150" cy="130" r="25" stroke="black" stroke-width="3" fill="gray" id="Br5" onclick="afficherChambre(5)" />
        <circle cx="100" cy="160" r="25" stroke="black" stroke-width="3" fill="gray" id="Br6" onclick="afficherChambre(6)" />
        <circle cx="100" cy="100" r="10" stroke="black" stroke-width="3" fill="black" />
    </svg>

    <button onclick="lancer()">Jouer</button>
</body>
</html>
